(function(){function e(e,t,i,o){var n,a,r=0,d=function(e){u()},u=function(){n.videoWidth>0&&n.videoHeight>0?(n.removeEventListener("loadeddata",d),c(n.videoWidth,n.videoHeight)):10>r?(r++,setTimeout(u,200)):c(640,480)},c=function(e,t){o(a,n,e,t)};if(n=document.createElement("video"),n.autoplay=!0,n.addEventListener("loadeddata",d),void 0!==e.source_id)var s={video:{optional:[{sourceId:e.source_id}]},audio:!1};else var s={video:!0,audio:!1};navigator.getMedia(s,function(e){i(),n.mozSrcObject?n.mozSrcObject=e:n.src=window.URL.createObjectURL(e),a=e,n.play()},t)}function t(t,i){function a(){t(new Error("Timed out while trying to start streaming"))}i=i||{};var r,d=void 0!==i.timeout?i.timeout:0;navigator.getMedia?(d>0&&(r=setTimeout(a,d)),e(i,function(){clearTimeout(r),t(new Error("getUserMedia cannot access the camera"))},function(){clearTimeout(r)},function(e,i,a,r){n=e,o=i,t(null,e,i,a,r)})):t(new Error("Native device media streaming (getUserMedia) not supported in this browser."))}function i(){n&&n.stop(),o&&(o.pause(),o.src=null,o=null)}window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var o,n,a={startVideoStreaming:t,stopVideoStreaming:i};"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:this.GumHelper=a}).call(this);